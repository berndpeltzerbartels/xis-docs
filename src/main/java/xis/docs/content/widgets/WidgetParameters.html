<xis:template xmlns:xis="http://www.w3.org/1999/XSL/Transform">
    <h3>${chapterHeadline}</h3>
    <p>Widgets can receive parameters through various mechanisms. Parameters enable widgets to be dynamic and reusable 
        with different data contexts.</p>

    <h5>Widget Parameter Annotations</h5>
    <p>XIS provides two parameter annotations for widgets and actions:</p>
    <ul>
        <li><code>@WidgetParameter</code> - Parameters passed when loading a widget (via links, containers, or navigation)</li>
        <li><code>@ActionParameter</code> - Parameters passed to action methods (via button clicks or link actions)</li>
    </ul>

    <h5>@WidgetParameter</h5>
    <p>Injects parameters that were passed when the widget was loaded. These parameters persist across action calls 
        within the same widget instance.</p>
    <pre><code class="language-java">@Widget
class ProductDetailsWidget {
    
    @ModelData("product")
    Product getProduct(@WidgetParameter("productId") String productId) {
        return productService.findById(productId);
    }
    
    @Action("addToCart")
    void addToCart(@WidgetParameter("productId") String productId) {
        cartService.addProduct(productId);
    }
}</code></pre>

    <h5>@ActionParameter</h5>
    <p>Injects parameters passed specifically to an action. These are typically defined in the template using 
        <code>&lt;xis:parameter&gt;</code> tags within action buttons or links.</p>
    <pre><code class="language-java">@Widget
class ProductListWidget {
    
    @Action("selectProduct")
    void selectProduct(@ActionParameter("productId") String productId,
                      @ActionParameter("source") String source) {
        analyticsService.trackSelection(productId, source);
    }
}</code></pre>

    <h5>Passing Widget Parameters: Query String Style</h5>
    <p>Use URL query string syntax in widget links and widget containers:</p>
    <pre><code class="language-html">&lt;!-- Widget link --&gt;
&lt;a xis:widget="ProductDetailsWidget?productId=${product.id}&amp;tab=reviews"&gt;
    View Details
&lt;/a&gt;

&lt;!-- Widget container --&gt;
&lt;xis:widget-container container-id="main" 
                     default-widget="ProductListWidget?categoryId=electronics"&gt;
&lt;/xis:widget-container&gt;</code></pre>

    <h5>Passing Widget Parameters: &lt;xis:parameter&gt; Tags</h5>
    <p>Use <code>&lt;xis:parameter&gt;</code> child elements for cleaner syntax, especially with EL expressions:</p>
    <pre><code class="language-html">&lt;!-- Widget link with parameters --&gt;
&lt;a xis:widget="ProductDetailsWidget"&gt;
    &lt;xis:parameter name="productId" value="${product.id}"/&gt;
    &lt;xis:parameter name="tab" value="reviews"/&gt;
    View Details
&lt;/a&gt;

&lt;!-- Widget container with parameters --&gt;
&lt;xis:widget-container container-id="main" default-widget="ProductListWidget"&gt;
    &lt;xis:parameter name="categoryId" value="${category.id}"/&gt;
    &lt;xis:parameter name="sortBy" value="name"/&gt;
&lt;/xis:widget-container&gt;</code></pre>

    <h5>Passing Action Parameters</h5>
    <p>Action parameters are passed using <code>&lt;xis:parameter&gt;</code> tags within buttons or links:</p>
    <pre><code class="language-html">&lt;button xis:action="selectProduct"&gt;
    &lt;xis:parameter name="productId" value="${product.id}"/&gt;
    &lt;xis:parameter name="source" value="list-view"/&gt;
    Select Product
&lt;/button&gt;

&lt;a xis:action="deleteItem"&gt;
    &lt;xis:parameter name="itemId" value="${item.id}"/&gt;
    &lt;xis:parameter name="confirmRequired" value="true"/&gt;
    Delete
&lt;/a&gt;</code></pre>

    <h5>Combining Widget and Action Parameters</h5>
    <p>Actions can access both widget parameters (from widget load) and action parameters (from button click):</p>
    <pre><code class="language-java">@Widget
class ShoppingCartWidget {
    
    @Action("updateQuantity")
    void updateQuantity(@WidgetParameter("cartId") String cartId,    // From widget load
                       @ActionParameter("itemId") String itemId,     // From button click
                       @ActionParameter("quantity") int quantity) {  // From button click
        cartService.updateQuantity(cartId, itemId, quantity);
    }
}</code></pre>
    <pre><code class="language-html">&lt;!-- Widget loaded with cartId parameter --&gt;
&lt;a xis:widget="ShoppingCartWidget"&gt;
    &lt;xis:parameter name="cartId" value="${cart.id}"/&gt;
    View Cart
&lt;/a&gt;

&lt;!-- Inside ShoppingCartWidget.html --&gt;
&lt;button xis:action="updateQuantity"&gt;
    &lt;xis:parameter name="itemId" value="${item.id}"/&gt;
    &lt;xis:parameter name="quantity" value="2"/&gt;
    Update Quantity
&lt;/button&gt;</code></pre>

    <h5>Parameter Priority</h5>
    <p>When using both query string and <code>&lt;xis:parameter&gt;</code> tags, if a parameter is defined in both 
        places, the query string value takes precedence:</p>
    <pre><code class="language-html">&lt;a xis:widget="ProductWidget?color=red"&gt;
    &lt;xis:parameter name="color" value="blue"/&gt;  &lt;!-- Ignored, query string wins --&gt;
    &lt;xis:parameter name="size" value="large"/&gt; &lt;!-- Used --&gt;
    View Product
&lt;/a&gt;
&lt;!-- Result: color=red, size=large --&gt;</code></pre>

    <h5>See Also</h5>
    <ul>
        <li><a href="#" xis:page="ParameterAnnotations">Parameter Annotations</a> - Complete reference for all parameter annotations</li>
        <li><a href="#" xis:page="WidgetNavigation">Widget Navigation</a> - Passing parameters during navigation</li>
    </ul>

</xis:template>
