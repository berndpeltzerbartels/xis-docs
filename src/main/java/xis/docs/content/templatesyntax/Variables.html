<xis:template xmlns:xis="http://www.w3.org/1999/XSL/Transform">
    <h3>${chapterHeadline}</h3>
    <xis:raw>
    <p>XIS templates support variables and expressions for dynamic content and attribute values. Variables can be used both in element content and in attribute values.</p>

    <h5>Basic Syntax</h5>
    <p>To output a variable or expression, use the <code>${...}</code> syntax:</p>
    
&lt;span&gt;Hello ${user.name}!&lt;/span&gt;
   
    <p>This will render the value of <code>user.name</code> at runtime.</p>

    <h5>Variables in Attributes</h5>
    <p>You can use variables and expressions in attribute values as well:</p>
    
&lt;div class="user ${user.active ? 'active' : 'inactive'}"&gt;...&lt;/div&gt;
   

    <h5>When <code>${...}</code> is Optional</h5>
    <p>In some XIS attributes (such as <code>xis:foreach</code>, <code>xis:repeat</code>, <code>xis:if</code>, and <code>array</code>), you can omit the <code>${...}</code> if it is clear that an expression or variable is expected. For example:</p>
    
&lt;div xis:foreach="user:users"&gt;...&lt;/div&gt;
&lt;div xis:if="user.active"&gt;...&lt;/div&gt;
   
    <p>is equivalent to</p>
    
&lt;div xis:foreach="user:${users}"&gt;...&lt;/div&gt;
&lt;div xis:if="${user.active}"&gt;...&lt;/div&gt;
   
    <p>This makes templates cleaner and easier to read. In all other places (especially in text content and most standard HTML attributes), you must use <code>${...}</code> to indicate a dynamic value.</p>

    <h5>Variables in Content and Attributes</h5>
    <p>Variables and expressions can be used both in element content and in attribute values:</p>
    
&lt;h2&gt;Welcome, ${user.displayName}!&lt;/h2&gt;
&lt;input type="text" value="${user.displayName}"&gt;
   

    <h5>Variable Scope, Inheritance, and Shadowing</h5>
    <p>Variables in XIS templates are distributed hierarchically: variables defined on a page are automatically available to all widgets used within that page, and to any sub-widgets those widgets include. This means you can access page variables in deeply nested widgets without extra wiring.</p>
    <p>This also applies to widget variables: a widget can pass its own variables to sub-widgets, creating a clear data flow from parent to child.</p>
    <p><strong>Note:</strong> <code>@FormData</code> variables are only available in the component (page or widget) where the form is defined. They are <em>not</em> passed down to widgets included inside the form. Each widget must receive its own form-data explicitly if needed.</p>
    <p><strong>Shadowing:</strong> If a widget (or sub-widget) defines a variable with the same name as a page variable, it <em>shadows</em> (overrides) the page variable in its own scope. The original page variable is not changed, but within the widget, the local variable takes precedence. This allows widgets to reuse variable names without affecting the parent scope.</p>
    <h5>Tip: Explicit Variable Naming</h5>
    <p>For clarity, especially in complex templates, it is often helpful to explicitly name variables when passing them to widgets or actions. For example, use <code>@PathVariable</code> or <code>@WidgetParameter</code> to make the data flow clear and avoid confusion with similarly named variables in different scopes.</p>

    <h5>Summary</h5>
    <ul>
        <li>Use <code>${...}</code> for variables and expressions in content and most attributes.</li>
        <li>In some XIS attributes, you can omit <code>${...}</code> if an expression is expected.</li>
        <li>Variables are allowed in both content and attribute values.</li>
        <li>Variables are inherited from parent to child (page → widget → sub-widget).</li>
        <li>Explicit variable naming helps keep templates maintainable.</li>
    </ul>
    <div class="warning">
        <p><code>@FormData</code> variables are only available in the component (page or widget) where the form is defined. They are <em>not</em> passed down to widgets included inside the form. Each widget must receive its own form-data explicitly if needed.</p>
    </div>
    </xis:raw>
</xis:template>