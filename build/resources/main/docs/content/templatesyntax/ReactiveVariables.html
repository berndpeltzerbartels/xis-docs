<xis:template>
    <h5>Example: Using @GlobalVariable</h5>
    <p>You can use <code>@GlobalVariable</code> in a widget to provide a global variable that updates reactively across all components.
        For example, a widget that changes the page title:</p>
    <pre><code class="language-html">
// TitleWidget.java
@Widget
class TitleWidget {
    @GlobalVariable("pageTitle")
    String getPageTitle() {
        return this.title;
    }

    @Action("setTitle")
    void setTitle(@ActionParameter("title") String title) {
        this.title = title;
    }
}
    </code></pre>
    <pre><code class="language-html">
// TitleWidget.html
 &lt;div>
    &lt;input type="text" xis:binding="title">
    &lt;button xis:action="setTitle">Set Title</button>
 &lt;/div>
    </code>
</pre>
// Any other template
<h1>${global.pageTitle}</h1>
    
    <p>When the title is changed in <code>TitleWidget</code>, all components using <code>${global.pageTitle}</code> update automatically.</p>
<xis:template xmlns:xis="http://www.w3.org/1999/XSL/Transform">
    <h4>Reactive Variables: global, clientState, localStorage</h4>
    <p>XIS supports several types of <strong>reactive variables</strong> that automatically update the UI when their value changes. Unlike normal variables, which are scoped to a single component or page, these special variables are shared and synchronized across multiple components and even browser sessions.</p>

    <h5>Global Variables (<code>global</code>)</h5>
    <p>Global variables are shared across all components and pages during a single request. They are ideal for user/session data that should be available everywhere (e.g. <code>global.currentUser</code>). When a global variable changes, all components using it update automatically.</p>
    
&lt;div&gt;Welcome, ${global.currentUserName}!&lt;/div&gt;
    

    <h5>Client State (<code>state</code> / <code>clientState</code>)</h5>
    <p>Client state variables are stored in the browser's <strong>sessionStorage</strong>. They persist across page navigations in the same browser tab, but are cleared when the tab or browser is closed. Use them for UI state like selected tabs, temporary form data, or wizard progress. All components using the same state variable (e.g. <code>state.selectedTab</code>) update reactively.</p>
    
&lt;button class="${state.selectedTab == 'profile' ? 'active' : ''}"&gt;Profile&lt;/button&gt;
    

    <h5>Local Storage (<code>localStorage</code>)</h5>
    <p>Local storage variables are stored in the browser's <strong>localStorage</strong>. They persist even after closing the browser or restarting the computer. Use them for long-term preferences, themes, or settings. All components using the same localStorage variable (e.g. <code>localStorage.userTheme</code>) update reactively when the value changes.</p>
    
&lt;body class="theme-${localStorage.userTheme}"&gt;
    ...
&lt;/body&gt;
    

    <h5>Scope and Reactivity</h5>
    <ul>
        <li><strong>Normal variables</strong> (e.g. <code>${user.name}</code>) are only available in the current component or page.</li>
        <li><strong>global</strong>, <strong>state</strong>, and <strong>localStorage</strong> variables are shared and reactive across all components that use them.</li>
        <li>Changing a global/clientState/localStorage variable updates all UI parts that reference it, without manual refresh.</li>
    </ul>

    <h5>Summary Table</h5>
    <table border="1" style="border-collapse:collapse;">
        <tr><th>Prefix</th><th>Scope</th><th>Persistence</th><th>Example</th></tr>
        <tr><td>global</td><td>All components (request)</td><td>Request only</td><td><code>${global.currentUserName}</code></td></tr>
        <tr><td>state</td><td>All components (browser tab)</td><td>sessionStorage (until tab/browser closed)</td><td><code>${state.selectedTab}</code></td></tr>
        <tr><td>localStorage</td><td>All components (browser)</td><td>localStorage (persistent)</td><td><code>${localStorage.userTheme}</code></td></tr>
    </table>

    <h5>Example: Reactive Update</h5>
    
&lt;button xis:action="changeTheme"&gt;Switch Theme&lt;/button&gt;
&lt;div&gt;Current theme: ${localStorage.userTheme}&lt;/div&gt;
    
    <p>When the theme is changed, all components using <code>localStorage.userTheme</code> update automatically.</p>

    <h5>Tip</h5>
    <ul>
        <li>Use <code>global</code> for data shared during a single request (e.g. current user, permissions).</li>
        <li>Use <code>state</code> for UI state that should persist while the tab is open.</li>
        <li>Use <code>localStorage</code> for preferences/settings that should persist long-term.</li>
    </ul>
</xis:template>